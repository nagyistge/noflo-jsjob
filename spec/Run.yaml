topic: "jsjob/Run"
name: "JsJob Run"
timeout: 10000
fixture:
 type: 'fbp'
 data: |
  # @runtime noflo-nodejs
  INPORT=c.IN:IN
  INPORT=c.CODE:CODE
  OUTPORT=r.OUT:OUT

  '8091' -> PORT c(jsjob/Run)
  c(jsjob/Run) OUT -> IN r(core/Repeat)

cases:
-
  name: 'running a helloworld'
  assertion: 'should return expected object'
  inputs:
    in:
      hello: 'World'
    code: 'http://localhost:8090/hellojsjob.js'
  expect:
    out:
      equals:
        hello: 'jsjob'
-
  name: 'adding numbers'
  assertion: 'should return object with plus ones'
  inputs:
    in:
      hello: 1
      world: 41
    code: 'http://localhost:8090/addone.js'
  expect:
    out:
      equals:
        hello: 2
        world: 42
